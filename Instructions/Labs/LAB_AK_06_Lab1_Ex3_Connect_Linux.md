# 모듈 6 - 랩 1 - 연습 3 - 데이터 커넥터를 사용하여 Azure Sentinel에 Linux 호스트 연결

### 작업 1: Azure Sentinel 작업 영역 액세스

이 작업에서는 Azure Sentinel 작업 영역에 액세스합니다.

1. WIN1 가상 머신에 Admin으로 로그인합니다. 암호로는 **Pa55w.rd** 를 사용합니다.  

2. 이 과정을 아직 진행하지 않았다면 브라우저를 열고 Microsoft Edge 브라우저를 검색하여 다운로드한 후 새로 설치합니다. 새 Edge 브라우저를 시작합니다.

3. Edge 브라우저에서 Azure Portal https://portal.azure.com으로 이동합니다.

4. 랩 호스팅 공급자가 제공한 **테넌트 전자 메일** 계정을 복사하여 **로그인** 대화 상자에 붙여넣은 후 **다음**을 선택합니다.

5. 랩 호스팅 공급자가 제공한 **테넌트 암호**를 복사하여 **암호 입력** 대화 상자에 붙여넣은 후 **로그인**을 선택합니다.

6. Azure Portal의 검색 창에 *Sentinel*을 입력하고 **Azure Sentinel**을 선택합니다.

7. 이전 랩에서 만든 Azure Sentinel 작업 영역을 선택합니다.

### 작업 2: Common Event Format 커넥터를 사용하여 Linux 호스트 연결

이 작업에서는 CEF(Common Event Format) 커넥터를 사용하여 Azure Sentinel에 Linux 호스트를 연결합니다.

1. Azure Sentinel의 구성 영역에서 **데이터 커넥터**를 선택합니다.  데이터 커넥터 탭의 목록에서 **Common Event Format** 커넥터를 선택합니다.

2. 커넥터 정보 블레이드에서 **커넥터 페이지 열기**를 선택합니다.

3. 1.2 Linux 머신에 CEF 수집기 설치에 나와 있는 명령을 클립보드에 복사합니다.

4. 다음 단계에서는 랩 환경의 가상 머신에서 정보를 복사하는 과정의 제한이 적용됩니다. 브라우저에서 https://outlook.office.com으로 이동합니다.

5. *MOD 관리자*에게 보내는 새 메시지를 작성합니다.

6. 커넥터 페이지에서 복사한 클립보드 명령을 붙여넣어 전자 메일 메시지를 보냅니다.

7. 로컬에서(랩 가상 머신 아님) InPrivate 브라우저 세션을 열고 https://outlook.office.com으로 이동합니다.

8. 랩 호스팅 공급자가 제공한 **테넌트 전자 메일** 계정을 복사하여 **로그인** 대화 상자에 붙여넣은 후 **다음**을 선택합니다.

9. 랩 호스팅 공급자가 제공한 **테넌트 암호**를 복사하여 **암호 입력** 대화 상자에 붙여넣은 후 **로그인**을 선택합니다.

10. 자신에게 전자 메일로 보낸 명령을 복사합니다.

11. LIN1 가상 머신에 root로 로그인합니다. 암호로는 **Passw0rd!** 또는 랩 공급자가 제공한 Linux 컴퓨터 자격 증명을 입력합니다.

12. 터미널 창에 명령을 붙여넣습니다.

13. 명령에서 "python"이라는 단어를 "python3"으로 변경하고 Enter 키를 눌러 명령을 실행합니다.

### 작업 3: Syslog 커넥터를 사용하여 Linux 호스트 연결

이 작업에서는 Syslog 커넥터를 사용하여 Azure Sentinel에 Linux 호스트를 연결합니다.

1. WIN1에 연결합니다. 이 머신에는 Azure Sentinel 포털이 이미 표시되어 있어야 합니다.  

2. 데이터 커넥터 탭의 목록에서 **Syslog** 커넥터를 선택합니다.

3. 커넥터 정보 블레이드에서 **커넥터 페이지 열기**를 선택합니다.

4. **Azure 이외의 Linux 컴퓨터에 에이전트 설치** 섹션을 엽니다.

5. **Azure 외 Linux 컴퓨터용 에이전트 다운로드 및 설치** 링크를 선택합니다. 

6. **Linux 서버** 탭을 선택합니다.

7. Linux를 위한 에이전트 다운로드 및 온보딩 영역에서 명령을 복사합니다.

8. 다음 단계에서는 랩 환경의 가상 머신에서 정보를 복사하는 과정의 제한이 적용됩니다. 브라우저에서 https://outlook.office.com으로 이동합니다.

9. *MOD 관리자*에게 보내는 새 메시지를 작성합니다.

10. 커넥터 페이지에서 복사한 클립보드 명령을 붙여넣습니다.

11. 로컬에서(랩 가상 머신 아님) 브라우저를 열고 https://outlook.office.com으로 이동합니다.

12. 랩 호스팅 공급자가 제공한 **테넌트 전자 메일** 계정을 복사하여 **로그인** 대화 상자에 붙여넣은 후 **다음**을 선택합니다.

13. 랩 호스팅 공급자가 제공한 **테넌트 암호**를 복사하여 **암호 입력** 대화 상자에 붙여넣은 후 **로그인**을 선택합니다.

14. 자신에게 전자 메일로 보낸 명령을 복사합니다.

15. LIN2 가상 머신에 *root* 사용자로 로그인합니다. 암호로는 **Passw0rd!** 또는 랩 공급자가 제공한 Linux 컴퓨터 자격 증명을 입력합니다.  

16. 터미널 창에 명령을 붙여넣고 **Enter** 키를 누릅니다.

### 작업 4: Syslog 커넥터용으로 수집할 기능 및 해당 심각도 구성

이 작업에서는 Syslog 수집 기능을 구성합니다.

1. WIN1 가상 머신에 연결합니다.

2. Azure Sentinel 포털에서 **설정**을 선택하고 설정 블레이드에서 **작업 영역 설정**을 선택합니다.

3. **설정** 영역에서 **에이전트 구성**을 선택합니다.

4. **Syslog** 탭을 선택합니다.

5. **기능 추가** 단추를 선택합니다.

6. **인증**을 선택합니다.

7. **기능 추가** 단추를 선택합니다.

8. *authpriv*를 입력하고 **+** 를 누릅니다.

9. **적용**을 선택합니다.

## 연습 4 계속 진행
